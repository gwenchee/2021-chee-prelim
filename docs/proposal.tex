\chapter{Future Work and Proposed Simulations}
% Main Gist 
% - My planned work
% Structure 
% - Stage 1: Tune hyperparameters for moltres problem
% - Stage 2: Demonstration of realm with moltres with complicated problem 
% - Stage 3: Evaluate the moltres' heat transfer interface and improve on it


% multi objective -> maximize keff, minimize power peaking / maximize heat transfer 
% These ideas lead into the proposal section 

% IDEAS 
% vary in y direction 
% try the whole 1/3 diamond fuel elemt 

The need for this work is shown by a summary of how additive manufacturing 
of nuclear reactor core components frees complex reactor geometries from 
previous manufacturing constraints enabling reactor designers to reexamine 
reactor core design optimization.
The literature review (Chapter \ref{chap:lit-review}) concluded that stochastic 
evolutionary algorithm optimization methods can be leveraged to find global 
optimums for reactor design problems in the vast exploration design space 
enabled by additive manufacturing. 
Chapter \ref{chap:fhr-benchmark} introduced the \acrfull{AHTR} benchmark and 
highlighted the reactor's benefits such as passive safety behavior with negative 
temperature coefficients. 
In Chapter \ref{chap:realm}, I introduced the \acrfull{REALM} software package 
which applies evolutionary algorithm optimization techniques to nuclear 
reactor design. 
Chapter \ref{chap:realm-demo} demonstrated successfully applying \gls{REALM} 
to optimize the \gls{TRISO} packing fraction distribution in an \gls{AHTR} slab. 

Based on what I learnt from the preliminary work conducted, this chapter proposes 
future simulations categorized into two groups: \gls{AHTR} development and 
\gls{REALM} optimization. 
For \gls{AHTR} development, I propose the following simulations: 
\begin{itemize}
    \item \gls{AHTR} 3D full core neutronics OpenMC simulation
    \item \gls{AHTR} fuel slab and one-third fuel assembly multiphysics 
    Moltres simulation
\end{itemize}
For \gls{REALM} optimization, I propose the following \gls{REALM} simulations: 
\begin{itemize}
    \item \gls{AHTR} slab geometry optimization to maximize $k_{eff}$, 
    minimize power peaking, and maximize heat transfer by varying \gls{TRISO} 
    x-axis distribution and \gls{FLiBe} channel shape using OpenMC. 
    \item \gls{AHTR} one-third fuel assembly optimization to maximize $k_{eff}$, 
    minimize power peaking, and maximize heat transfer by varying \gls{TRISO} 
    xy axes distribution and \gls{FLiBe} channel shape using OpenMC.
\end{itemize}
The \gls{REALM} simulations proposed might be extended to include Moltres 
evaluations if the \gls{AHTR} development Moltres simulations find approximations 
and assumptions that maintain accuracy while keeping acceptable Moltres runtimes.

\section{AHTR Development}
The \gls{FHR} benchmark introduced in Chapter \ref{chap:fhr-benchmark} is an 
ongoing \gls{NEA} project to assess the modeling and simulation capabilities 
for the \gls{AHTR}. 
Benchmark participants', including the \gls{UIUC} team, contributed Phases I-A 
and I-B (2D assembly steady state and depletion) so far.  
The upcoming phases consist of 3D neutronics models and multiphysics models. 
Thus, in an effort to support the \gls{FHR} benchmark, the proposed work will 
complete the benchmark's Phase I-C.
Also, in preparation for the later multiphysics benchmark phases, the proposed 
work will utilize Moltres to model the multi-physics for a smaller section of 
the \gls{AHTR} geometry. 

\subsection{\gls{FHR} Benchmark Phase I-C}
The \gls{FHR} benchmark's Phase I-C extends the 2D assembly model from Phases 
I-A and I-B into a 3D assembly model. 
The benchmark organizer's will release Phase I-C's detailed specifications and 
required results in June 2021.

\subsection{\gls{AHTR} Multiphysics Model}
I will use the open source simulation tool, Moltres, to conduct multiphysics 
simulations of the \gls{AHTR}. 
Moltres, an application built atop the \gls{MOOSE} parallel finite element 
framework \cite{gaston_moose:_2009}, contains physics kernels and boundary 
conditions to solve arbitrary-group deterministic neutron diffusion and 
thermal-hydraulics \glspl{PDE} simultaneously on a single mesh
\cite{lindsay_introduction_2018,park_advancement_2020}. 
\gls{AHTR} Moltres simulations will capture thermal feedback effects, absent
from the purely neutronics OpenMC simulations.  
% say stuff about Cole gentry's paper/phd. Multiphysics 

In past effort towards multiphysics modeling of the \gls{AHTR}, Gentry et al 
\cite{gentry_development_2016} developed an adapted lattice physics-to-core 
simulator two-step procedure with Serpent \cite{leppanen_serpent_2014} 
and \gls{NESTLE} \cite{turinsky_nestle_1994}. 
The adapted lattice physics-to-core simulator two-step procedure proved to be 
successful for \glspl{LWR} in which few group assembly homogenized group 
constants are generated by 2-D transport lattice calculation and then core 
analysis is performed by 3-D nodal simulation 
\cite{koebke_new_1980,gentry_development_2016}. 
\gls{NESTLE}'s thermal-hydraulics utilizes a \gls{HEM} model for two-phase 
flow and it solves the few-group neutron diffusion equation utilizing the
\gls{NEM} for cartesian and hexagonal reactor geometries.  
Lin \cite{lin_thermal_2020} used RELAP5, a system-level code, to perform 
\gls{AHTR} thermal hydraulics transient simulations to investigate the 
capability of the passive heat removal system. 
In this \gls{AHTR} RELAP5 model, the 252 assemblies are separated into four 
concentric rings and a uniform power distribution is assigned to the fuel 
assemblies in each ring, and more fidelity is placed on the primary and 
\gls{DRACS} system loops. 

Novak et al \cite{novak_pronghorn_2021} conducted multiphysics coupling of 
Pronghorn (), RELAP-7, and Griffin ().  

The benefits of Moltres over RELAP5 and NESTLE for coupled neutronics and 
thermal-hydraulics simulation: 
\begin{itemize}
  \item Moltres supports up to 3-D meshes, solving neutron diffusion and 
  thermal-hydraulics \glspl{PDE} simultaneously on the same mesh. This is much 
  more flexible compared to \gls{NESTLE} and RELAP5 which only support 
  rectangular and hexagonal assembly lattices. Therefore, Moltres can be utilized 
  to easily explore arbitrary reactor geometries.
  \item Moltres tightly couples neutronics and thermal-hydraulics, thus 
  provides higher accuracy. 
  \item Moltres, a \gls{MOOSE}-based application, uses MPI for parallel computing 
  and can be compiled and run on \glspl{HPC}. 
\end{itemize}

The most crucial step for successful Moltres simulation of \gls{AHTR} geometry 
is homogenization of the \gls{TRISO} particles. 
% problem is with the mesh computationally expensive to have TRISO particles 
% steps to reach Moltres model of AHTR. 

%The approximations and assumptions to be explored include: 
%\begin{itemize}
%    \item TRISO homogenization
%    \item Macroscopic cross section generation, energy and spatial discretization
%\end{itemize}

% talk about macroscopic XS generation with OpenMC. Will have to write the 
% script to couple OpenMC to Moltres

% what is okay? 
% 200pcm ?
% based on our BW allocation. 

\section{REALM Optimization}
Chapter \ref{chap:realm-demo} demonstrated \gls{REALM}'s success with the
demonstration problem, and concluded that the problem should be further
developed by considering other objectives such as maximizing heat transfer and 
minimizing power peaking in the core. 
In the proposed work, I will explore each objective separately and then together.
Table \ref{tab:objectives} describes each objective and how the objective will 
be quantified. 
\begin{table}[]
    \centering
    \onehalfspacing
    \caption{\acrfull{REALM} optimization problem objectives with their quantification 
    descriptions.}
	\label{tab:objectives}
    \footnotesize
    \begin{tabular}{p{4cm}p{8cm}}
    \hline 
    \textbf{Objective}& \textbf{Quantification}  \\
    \hline
    Best neutronics & Maximize $k_{eff}$\\ 
    Maximize heat transfer & Maximize $\phi_{total}$ in areas along FLiBe coolant \\
    Minimize power peaking & Minimize $P_{high}-P_{low}$ \\
    \hline
    \end{tabular}
\end{table}
The slab parameters that will be varied to meet the described problem objectives 
include: 
\begin{itemize}
    \item \gls{TRISO} particle packing fraction distribution
    \item \gls{FLiBe} coolant channel shape 
\end{itemize} 
I will conduct these optimizations for the straightened \gls{AHTR} fuel slab 
geometry (as seen in Figure \ref{fig:straightened_slab}) and for one 
diamond-shaped sector containing six fuel slabs (as seen in Figure 
\ref{fig:ahtr-fuel-assembly}) with x-y periodic and z reflective boundary 
conditions. 
% show how x-y variation will occur. 
Table \ref{tab:realm_simulations} outlines the details of the proposed 
simulations. 
\begin{table}[]
    \centering
    \onehalfspacing
    \caption{Proposed \acrfull{REALM} simulations for optimizing \acrfull{AHTR}
    fuel assembly. Simulations explore two geometries: straightened \gls{AHTR} 
    fuel slab and \gls{AHTR}'s diamond-shaped section containing six fuel slabs.}
	\label{tab:realm_simulations}
    \footnotesize
    \begin{tabular}{clll}
    \hline 
    \textbf{Simulation}& \textbf{AHTR Geometry} & \textbf{Objectives} & \textbf{Varying Parameters}  \\
    \hline
    1 & Single fuel slab & \tabitem Maximize $k_{eff}$ &\tabitem TRISO distribution \\
    2 & Single fuel slab & \tabitem Maximize heat transfer &\tabitem TRISO distribution \\
    3 & Single fuel slab & \tabitem Minimize power peaking & \tabitem TRISO distribution \\
    4 & Single fuel slab & \tabitem Maximize $k_{eff}$ & \tabitem FLiBe channel shape \\ 
    5 & Single fuel slab & \tabitem Maximize heat transfer & \tabitem FLiBe channel shape \\
    6 & Single fuel slab & \tabitem Minimize power peaking & \tabitem FLiBe channel shape \\
    7 & Single fuel slab & \tabitem Maximize $k_{eff}$ & \tabitem TRISO distribution \\ 
      & & \tabitem Maximize heat transfer & \\
      & & \tabitem Minimize power peaking & \\ 
    8 & Single fuel slab & \tabitem Maximize $k_{eff}$ & \tabitem FLiBe channel shape \\ 
      & & \tabitem Maximize heat transfer & \\
      & & \tabitem Minimize power peaking & \\     
    9 & Single fuel slab & \tabitem Maximize $k_{eff}$ & \tabitem TRISO distribution \\  
      & & \tabitem Maximize heat transfer & \tabitem FLiBe channel shape \\
      & & \tabitem Minimize power peaking & \\   
    10 & Diamond section with 6 fuel slabs & \tabitem Maximize $k_{eff}$ & \tabitem TRISO distribution \\ 
      & & \tabitem Maximize heat transfer & \\
      & & \tabitem Minimize power peaking & \\ 
    11 & Diamond section with 6 fuel slabs & \tabitem Maximize $k_{eff}$ & \tabitem FLiBe channel shape \\ 
      & & \tabitem Maximize heat transfer & \\
      & & \tabitem Minimize power peaking & \\     
    12 & Diamond section with 6 fuel slabs & \tabitem Maximize $k_{eff}$ & \tabitem TRISO distribution \\  
      & & \tabitem Maximize heat transfer & \tabitem FLiBe channel shape \\
      & & \tabitem Minimize power peaking & \\  
    \hline
    \end{tabular}
\end{table}
% Simulation 1 was conducted in Chapter 5 but I want to explore it further with 
% larger a bounds since it capped out at 2. 
I will use the optimal hyperparameters derived in Section 
\ref{sec:hyperparameter_search} for the proposed simulations. 
Ideally, a new hyperparameter search should be conducted for each simulation to 
find the best hyperparameter set for each unique problem; however, the 
computational expense for conducting 11 hyperparameter searches is impractical.
Using the same hyperparameter set is acceptable because the problems are similar. 
% talk about how hyperparameters that work are around the same for similar problems. 
The optimal hyperparameters are summarized in Table \ref{tab:best_hyperparameters}.
\begin{table}[]
    \centering
    \onehalfspacing
    \caption{Hyperparameter values for the best hyperparameter set calculated in 
    Section \ref{sec:hyperparameter_search}.}
	\label{tab:best_hyperparameters}
    \footnotesize
    \begin{tabular}{ll}
    \hline 
    \textbf{Hyperparameters}& \textbf{Values}  \\
    \hline
    Population size & 60\\ 
    Generations & 10\\
    Mutation probability & 0.23\\ 
    Mating probability & 0.46\\
    Selection operator & \texttt{selTournament}\\
    Selection individuals & 15\\
    Selection tournament size & 5\\ 
    Mutation operator & \texttt{mutPolynomialBounded}\\ 
    Mating operator & \text{cxBlend}\\ 
    \hline
    \end{tabular}
\end{table}

\section{Conclusion}
% summarize what the proposed work aims to demonstrate.